---
title: 802.1X configure EAP-TLS
description: Configure EAP-TLS with the ISE, Active Directory and Catalyst Switch
tags: 802.1X
---


<markdown-image src="802dot1X_EAP-TLS/1.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/2.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/3.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/4.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/5.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/6.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/7.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/8.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/9.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/10.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/11.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/12.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/13.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/14.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/15.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/16.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/17.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/18.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/19.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/20.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/21.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/22.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/23.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/24.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/25.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/26.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/27.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/28.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/29.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/30.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/31.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/32.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/33.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/34.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/35.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/36.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/37.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/38.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/39.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/40.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/41.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/42.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/43.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/44.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/45.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/46.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/47.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/48.PNG" alt="Alt text"></markdown-image>

create Wlan Enterprise
<markdown-image src="802dot1X_EAP-TLS/49.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/50.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/51.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/52.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/53.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/54.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/55.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/56.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/57.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/58.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/59.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/60.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/61.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/62.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/63.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/64.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/65.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/66.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/67.PNG" alt="Alt text"></markdown-image>

CA Zertifikat in ISE kopieren
<markdown-image src="802dot1X_EAP-TLS/68.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/69.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/70.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/71.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/72.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/73.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/74.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/75.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/76.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/77.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/78.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/79.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/80.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/81.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/82.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/83.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/84.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/85.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/86.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/87.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/88.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/89.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/90.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/91.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/92.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/93.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/94.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/95.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/96.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/97.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/98.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/99.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/100.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/100.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/101.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/102.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/103.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/104.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/105.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/106.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/107.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/108.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/109.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/110.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/111.PNG" alt="Alt text"></markdown-image>

<markdown-image src="802dot1X_EAP-TLS/112.PNG" alt="Alt text"></markdown-image>

# Helpful Commands
``` python
certutil.exe -setcatemplates +Machincert #Zertifikat in Zertifikatvorlage kopieren 
gpresult /r /scope COMPUTER #um GPO anzuzeigen welche aktiv sind 
cd Desktop
certreq -submit -attrib "CertificateTemplate:Webserver" ise.req ise.cer #um webserver zert zu erstellen
```

# Config
``` 
aaa new-model
aaa authentication login default group tacacs+ local
aaa authentication dot1x default group radius
aaa authorization network default group radius
aaa authorization auth-proxy default group radius
aaa accounting dot1x default start-stop group radius
aaa session-id common
aaa accounting update newinfo periodic 2880
aaa accounting system default start-stop group radius 
```

``` 
dot1x system-auth-control
dot1x critical eapol
authentication critical recovery delay 1000
epm logging
epm access-control open
access-session acl default passthrough 
```

``` 
no authentication logging verbose
no mab logging verbose
no dot1x logging verbose 
```

``` 
aaa server radius dynamic-author
client 10.10.10.10 server-key PW
client 20.20.20.20 server-key PW 
```

``` 
radius server ISENAME
address ipv4 10.10.10.10 auth-port 1812 acct-port 1813
retransmit 2
timeout 3
key CISCO
exit 
```

``` 
radius server ISENAME2
address ipv4 10.10.10.12 auth-port 1812 acct-port 1813
retransmit 2
timeout 3
key CISCO
exit 
```

``` 
aaa server radius dynamic-author
client 10.10.10.10 server-key CISCO
client 10.10.10.12 server-key CISCO
exit 
```

``` 
radius-server attribute 6 on-for-login-auth
radius-server attribute 8 include-in-access-req
radius-server attribute 25 access-request include
radius-server deadtime 15
radius-server dead-criteria time 30 tries 3
radius-server vsa send accounting
radius-server vsa send authentication
exit 
```

``` 
test aaa group radius test test legacy 
```

``` python
ip radius source-interface Vlan2 #To force RADIUS to use the IP address of a specified interface for all outgoing RADIUS packets
```

``` 
 authentication mac-move permit 
```

``` 
authentication critical recovery delay 1000 
```

``` python
dot1x system-auth-control #enables the switch as authenticator
```

Access port config
``` 
authentication event fail action next-method
authentication event server alive action reinitialize
authentication host-mode multi-domain
authentication order dot1x mab
authentication priority dot1x mab
authentication port-control auto
authentication periodic
authentication timer reauthenticate server
authentication timer inactivity server
authentication violation restrict
mab
dot1x pae authenticator
dot1x timeout tx-period 7
```

``` 
 shut
```

``` 
no shut 
```

``` python
show authentication sessions
show authentication sessions interface gi1/0/5
clear authentication sessions interface gi1/0/5 #clears all authentication for this port 
```

# Tipps

Deactivate in Authorization Profile: Cisco IP phone the DACL Name cause it doesnt work properly on Cisco IP phones

</br>

Single-host mode should be configured if only one data host is connected. Do not connect a voice device to authenticate on a single-host port. Voice device authorization fails if no voice VLAN is configured on the port.

</br>

Multi-domain mode should be configured if data host is connected through an IP Phone to the port. Multi-domain mode should be configured if the voice device needs to be authenticated.

</br>

Multi-auth mode should be configured to allow up to eight devices behind a hub to obtain secured port access through individual authentication. Only one voice device can be authenticated in this mode if a voice VLAN is configured.

</br>

Multi-host mode also offers port access for multiple hosts behind a hub, but multi-host mode gives unrestricted port access to the devices after the first user gets authenticated. 